
<% @title = "Assign team for #{@track_event_program.name} #{title_label_for_gender(@gender)}" %>

<h2><%= @title %></h2>
<br/>
<%= link_to 'Back to Manage Track Events', {controller: '/activity/track_events', action: 'index'}, {class: 'button'} %>
<br/><br/>

<h3>Current Sign-ups</h3>
<table border="1px">
  <thead>
    <tr>
      <th>Student Name</th>
      <th>School Age</th>
      <th>Grade Class</th>
      <th>Assign Team</th>
    </tr>
  </thead>
  <tbody>
    <% @track_event_signups.each do |signup| %>
      <% student = signup.student %>
    <tr>
      <td align="center"><%=h student.name %></td>
      <td align="center"><%= student.school_age_for(SchoolYear.current_school_year) %></td>
      <td align="center"><%= student.student_class_assignment_for(SchoolYear.current_school_year).school_class.short_name %></td>
      <td>
        <%= render partial: 'track_team_assignment', locals: {track_event_teams: @track_event_teams, gender: @gender, signup: signup} %>
      </td>
    </tr>
    <% end %>
  </tbody>
</table>

<h3>Team List</h3>
<table border="1px">
  <thead>
    <tr>
      <th>Team Name</th>
      <th>Team Member Count</th>
    </tr>
  </thead>
  <tbody>
    <% @track_event_teams.each do |team| %>
    <tr>
      <td align="center"><%=h team.name %></td>
      <td align="center"><%= team.track_event_signups.size %></td>
      <td><%= link_to 'Delete', {controller: '/activity/track_events', action: 'delete_team', id: team, gender: @gender}, {class: 'button', confirm: "Are you sure you want to delete #{team.name}?"} %></td>
    </tr>
    <% end %>
  </tbody>
</table>

<%= link_to 'Refresh Team Member Count', {controller: '/activity/track_events', action: 'assign_student_team_index', id: @track_event_program, gender: @gender}, {class: 'button'} %>
<br/>
<br/>
<%= form_tag action: 'create_team', id: @track_event_program, gender: @gender do %>
    <%= submit_tag 'Create New Team', class: 'button' %>&nbsp;with name&nbsp;<%= text_field_tag :name, '', size: 20 %>
<% end %>
